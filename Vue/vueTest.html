<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <title>vue</title>
    <style>
        .red {
            background: red;
        }

        .big {
            font-weight: bold;
            font-size: 30px;
        }
    </style>
</head>

<body>
    <div id="app-2">
        <input type="text" v-model="name" placeholder="请输入你的名字">
        <span>
            {{now|formatDate}}
        </span>
        <span v-html="link"></span>
        <span>
            {{new Date()}}
        </span>
        <button v-on:click="hello">
            你好
        </button>
        <p>
            {{countPrice}}
        </p>
        <p>
            {{countPrice}}
        </p>
        <p>
            {{fullName}}
        </p>
        <p>
            {{ reverseMessage() }}
        </p>
        <p>
            {{ now }}
        </p>
        <p :class="{'red':isRed}">{{text}}</p>
        <p :class="classes">{{text}}</p>
        <p :class="[red,big]">{{text}}</p>
        <p :style="specialStyle">内联样式写法（vue会自动添加前缀）</p>
        <div v-if="21">
            <p>dsfa</p>
            <p>sfa</p>
            <p>s</p>
        </div>
        <p v-for="name in user">
            {{ name }}
        </p>
    </div>
</body>
<script>
    function padDate(value) {
        return value < 10 ? "0" + value : value
    }
    var app = new Vue({
        el: "#app-2",
        data: {
            user:{
                name:"ds",
                age:11
            },
            name: 0,
            link: "<a href = 'http://www.baidu.com'>百度</a>",
            text: "今天天气不错！",
            isRed: 1,
            isActive: 1,
            error: null,
            red: 'red',
            big: 'big',
            package1: [
                {
                    price: 8334,
                    counts: 13
                },
                {
                    price: 84,
                    counts: 113
                },
                {
                    price: 334,
                    counts: 3
                },
            ],
            package2: [
                {
                    price: 123,
                    counts: 22
                },
                {
                    price: 122,
                    counts: 221
                },
                {
                    price: 223,
                    counts: 2
                },
            ],
            firstName: "green",
            lastName: "day",
            message: "大河向东流啊",
            specialStyle: {
                color: 'green',
                fontSize: '14px',
            }
        },
        methods: {
            reverseMessage: function () {
                return Date.now()
            },
            hello: function () {
                alert("hello")
            },
        },
        mounted: function () {
            var _this = this
            this.timer = setInterval(function () {
                _this.now = new Date()
                _this.name += 1
            }, 1000)

        },
        created: function () {
            // hello() 此时未定义
        },
        beforeDestory: function () {
            clearInterval(this.timer)
        },
        filters: {
            // 过滤器应当处理简单的文本转换，复杂的应该使用计算属性
            formatDate: function (value) {
                var date = new Date(value)
                var year = date.getFullYear()
                var month = padDate(date.getMonth() + 1)
                var day = padDate(date.getDate())
                var hours = padDate(date.getHours())
                var minutes = padDate(date.getMinutes())
                var seconds = padDate(date.getSeconds())

                return year + '-' + month + '-' + day + '-' + hours + ':' + minutes + ':' + seconds
            }
        },
        computed: {
            // 所有的计算属性都以函数的形式写在Vue实例内的computed选项内，最终返回计算后的结果。
            reversedText: function () {
                // 这里的this是当前vue实例。
                return this.text.split("").reverse().join("")
            },
            countPrice: function () {
                var total = 0
                for (var x = 0; x < this.package1.length; x++) {
                    total += this.package1[x].price * this.package1[x].counts
                }
                for (var y = 0; y < this.package2.length; y++) {
                    total += this.package2[y].price * this.package2[y].counts
                }
                return total
            },
            fullName: {
                get: function () {
                    return this.firstName + this.lastName;
                },
                set: function (newValue) {
                    var names = newValue.split(" ")
                    this.firstName = names[0]
                    this.lastName = names[1]
                }
            },
            now: {
                get: function () {
                    return Date.now()
                },
                set: function () {

                }
            },
            classes: function () {
                return {
                    active: this.isActive && !this.error,
                    'text-fail': this.error && this.error.type === 'fail'
                }
            },
        }


    })
</script>

</html>